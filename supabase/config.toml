project_id = "wddlktajnhwhyquwcdgf"

# Configuration optimisée Kwenda - Fonctions actives uniquement

[functions.unified-dispatcher]
verify_jwt = true  # ✅ PHASE 4: Dispatcher unifié (remplace ride/delivery/smart-ride)

[functions.google-maps-proxy]
verify_jwt = true  # ✅ SÉCURITÉ CRITIQUE: Proxy sécurisé pour API Google Maps

[functions.admin-operations]
verify_jwt = true

[functions.admin-analytics]
verify_jwt = true

[functions.admin-notifications]
verify_jwt = true

[functions.notification-dispatcher]
verify_jwt = false

[functions.auto-dispatch-system]
verify_jwt = false

[functions.lottery-system]
verify_jwt = true  # ✅ PHASE 2 CRITIQUE: JWT requis pour loterie

[functions.partner-validation-notification]
verify_jwt = true

[functions.function-monitor]
verify_jwt = true

[functions.rental-moderation]
verify_jwt = true

[functions.taxi-moderation]
verify_jwt = true

[functions.auto-cancel-expired-orders]
verify_jwt = false

[functions.verify-user-account]
verify_jwt = true

[functions.geocode-proxy]
verify_jwt = true  # ✅ PHASE 2: JWT requis pour géocodage

[functions.get-google-maps-key]
verify_jwt = true  # ✅ SÉCURISÉ: JWT obligatoire pour protéger la clé Google Maps

[functions.google-maps-security-monitor]
verify_jwt = true

[functions.google-places-autocomplete]
verify_jwt = true  # ✅ PHASE 2: JWT requis pour autocomplete

[functions.google-place-details]
verify_jwt = true  # ✅ SÉCURITÉ: JWT requis pour détails de lieux Google

[functions.wallet-topup]
verify_jwt = true

[functions.mobile-money-payment]
verify_jwt = true

[functions.orange-money-webhook]
verify_jwt = false

[functions.push-notifications]
verify_jwt = true

[functions.seed-drivers]
verify_jwt = false

[functions.intelligent-driver-matching]
verify_jwt = true  # ✅ SÉCURITÉ: JWT requis pour matching intelligent de chauffeurs

[functions.smart-notification-dispatcher]
verify_jwt = true

[functions.send-sms-notification]
verify_jwt = true

[functions.partner-notifications]
verify_jwt = true

[functions.delivery-dispatcher]
verify_jwt = true  # ✅ SÉCURITÉ CRITIQUE: JWT requis pour empêcher abus

[functions.ride-dispatcher]
verify_jwt = true  # ✅ PHASE 2: JWT requis pour dispatcher

[functions.smart-ride-dispatcher]
verify_jwt = true  # ✅ SÉCURITÉ: JWT requis pour dispatch intelligent de courses

[functions.auto-renew-subscriptions]
verify_jwt = false  # Sera appelé par CRON, pas par les utilisateurs

[functions.subscription-manager]
verify_jwt = true

[functions.admin-grant-trial]
verify_jwt = true

[functions.auto-grant-trial-new-drivers]
verify_jwt = false

[functions.mobile-money-subscription]
verify_jwt = true

[functions.consume-ride]
verify_jwt = true

[functions.driver-arrival-confirmation]
verify_jwt = true  # ✅ SÉCURITÉ CRITIQUE: Confirmation arrivée avec vérification GPS

[functions.moderate-product]
verify_jwt = true

[functions.admin-get-user-metadata]
verify_jwt = true

[functions.calculate-promo-discount]
verify_jwt = true

[functions.credit-promo-driver-compensation]
verify_jwt = false

[functions.voice-navigation]
verify_jwt = true

[functions.geocode-order]
verify_jwt = true

[functions.partner-subscription-commission]
verify_jwt = false

[functions.vendor-subscription-manager]
verify_jwt = true

[functions.auto-retry-delivery-dispatch]
verify_jwt = false

[functions.auto-retry-assignment]
verify_jwt = false  # ✅ NOUVEAU: Système de retry automatique

[functions.refresh-admin-cache]
verify_jwt = false  # Appelé automatiquement par CRON toutes les 5 minutes

[functions.notify-admin-new-product]
verify_jwt = true  # ✅ PHASE 2: JWT requis pour création produit

[functions.vendor-verify-request]
verify_jwt = true  # ✅ PHASE 2: JWT requis pour vérification vendeur

[functions.food-order-processor]
verify_jwt = true  # ✅ JWT requis pour création de commandes food

[functions.validate-promo-and-referral]
verify_jwt = true  # ✅ Validation sécurisée codes promo et parrainage

[functions.validate-transfer-recipient]
verify_jwt = true  # ✅ Validation temps réel du destinataire de transfert

[functions.process-marketplace-sale]
verify_jwt = false  # ✅ PHASE 4: Traitement automatique des commissions marketplace (appelé par trigger)

[functions.smart-driver-dispatch]
verify_jwt = true  # ✅ PHASE 4: Dispatch intelligent de chauffeurs avec scoring

[functions.accept-delivery-fee]
verify_jwt = true  # ✅ JWT requis pour acceptation frais de livraison marketplace

[functions.assign-food-delivery]
verify_jwt = true  # ✅ JWT requis pour assignation de livreur aux commandes food

[functions.admin-approve-all-rentals]
verify_jwt = true  # ✅ Approbation en masse véhicules location par admin

[functions.partner-vehicle-notification]
verify_jwt = false  # ✅ Notifications automatiques pour nouveaux véhicules

[functions.admin-approve-vehicle]
verify_jwt = true  # ✅ Approbation individuelle véhicule par admin

[functions.admin-reject-vehicle]
verify_jwt = true  # ✅ Rejet individuel véhicule par admin avec raison

[functions.validate-driver-service-type]
verify_jwt = true  # ✅ PHASE 1: Validation stricte du type de service chauffeur

[functions.driver-notification-router]
verify_jwt = false  # ✅ PHASE 2: Routage intelligent des notifications par type de service (appelé par triggers)

[functions.complete-ride-with-commission]
verify_jwt = true  # ✅ PHASE 2: Finalisation course avec prélèvement commission automatique

[functions.detect-cancellation-fraud]
verify_jwt = false  # ✅ PHASE 2: Détection annulations frauduleuses (appelé automatiquement)

[functions.notify-drivers-bidding]
verify_jwt = true  # ✅ JWT requis pour notifications mode enchères

[functions.process-marketplace-payment]
verify_jwt = true  # ✅ SÉCURITÉ CRITIQUE: Traitement atomique paiements marketplace avec validation server-side

[functions.complete-marketplace-order]
verify_jwt = true  # ✅ PHASE 2: Finalisation commande marketplace avec libération automatique des fonds

[functions.auto-release-escrow]
verify_jwt = false  # ✅ PHASE 4: Libération automatique après 7 jours (appelé par CRON)

[functions.wallet-restaurant-topup]
verify_jwt = true  # ✅ JWT requis pour recharge wallet restaurant

[functions.mobile-money-webhook]
verify_jwt = false  # ✅ Webhook appelé par providers Mobile Money
